name: agria_server_env

channels:
  - conda-forge
  - defaults
  - pytorch

dependencies:
  - python=3.11

  # ---------- Core scientific stack ----------
  - numpy<2
  - pandas

  # ---------- Geospatial stack (conda-forge only!) ----------
  - geopandas
  - shapely
  - pyproj
  - rasterio
  - fiona
  - gdal

  # ---------- Runtime ----------
  - pip

  # PyTorch + CUDA via conda
  - pytorch=2.4.*
  - torchvision
  - torchaudio

  - pip:
      # --- Web backend ---
      - flask
      - flask-cors
      - python-dotenv

      # --- LLM / GenAI ---
      - google-genai

      # --- Utilities ---
      - requests
      - structlog
      - minio
      - Pillow
      - protobuf
      - matplotlib

      # --- Image / EO ---
      - opencv-python<4.12
      - scikit-image
      - rioxarray
      - sentinelhub
      - safetensors

      # --- Testing / Dev ---
      - pytest
      - pytest-mock
      - flake8
      - autopep8

      # --- External tools ---
      - git+https://github.com/KhaosResearch/sen2sr-tools.git@main
      - git+https://github.com/KhaosResearch/sigpac-tools.git@dev
